{% extends 'base.html' %}
{% block title %}Diamond Details{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <h1 class="text-center mb-5" style="color:rgb(11, 25, 55); font-weight:bold; text-decoration:underline;">
        Diamond {{ diamond.stock_id }}
    </h1>

    <div class="row justify-content-center gx-4 gy-4">
        <!-- Diamond Details Table -->
        <div class="col-lg-6 col-md-12">
            <div class="card shadow-sm h-100">
                <div class="card-header text-center" style="background: #f8f9fa; font-weight: 500; font-size: 1.5rem; color: black;">
                    Details
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-bordered mb-0">
                            <tbody>
                                <tr><th>Stock Id</th><td>{{ diamond.stock_id }}</td><th>Shape</th><td>{{ diamond.get_shape_display }}</td></tr>
                                <tr><th>Carat</th><td>{{ diamond.carat }}</td><th>Color</th><td>{{ diamond.get_color_display }}</td></tr>
                                <tr><th>Clarity</th><td>{{ diamond.get_clarity_display }}</td><th>Lab</th><td>{{ diamond.get_lab_display }}</td></tr>
                                <tr><th>Report #</th><td>{{ diamond.report_number }}</td><th>Type</th><td>{{ diamond.get_type_display }}</td></tr>
                                <tr><th>Rap Rate</th><td>{{ diamond.rap_rate }}</td><th>Discount %</th><td>{{ diamond.discount_percentage }}</td></tr>
                                <tr><th>Price Per Carat</th><td>{{ diamond.price_per_carat }}</td><th>Total Amount</th><td>{{ diamond.total_amount }}</td></tr>
                                <tr><th>Cut</th><td>{{ diamond.get_cut_display }}</td><th>Polish</th><td>{{ diamond.get_polish_display }}</td></tr>
                                <tr><th>Symmetry</th><td>{{ diamond.get_symmetry_display }}</td><th>Fluorescence</th><td>{{ diamond.fluorescence }}</td></tr>
                                <tr><th>Length</th><td>{{ diamond.length }}</td><th>Width</th><td>{{ diamond.width }}</td></tr>
                                <tr><th>Height</th><td>{{ diamond.height }}</td><th>Measurements</th><td>{{ diamond.measurements }}</td></tr>
                                <tr><th>Table %</th><td>{{ diamond.table_percentage }}</td><th>Depth %</th><td>{{ diamond.depth_percentage }}</td></tr>
                                <tr><th>Crown Angle</th><td>{{ diamond.crown_angle }}</td><th>Crown Height %</th><td>{{ diamond.crown_height_percentage }}</td></tr>
                                <tr><th>Pavilion Angle</th><td>{{ diamond.pavilion_angle }}</td><th>Pavilion Depth</th><td>{{ diamond.pavilion_depth }}</td></tr>
                                <tr><th>Ratio</th><td>{{ diamond.ratio }}</td><th>BGM</th><td>{{ diamond.bgm }}</td></tr>
                                <tr>
                                    <th>360 Video</th>
                                    <td>
                                        {% if diamond.video_360 %}
                                            <a href="{{ diamond.video_360 }}" target="_blank">View Video</a>
                                        {% else %} N/A {% endif %}
                                    </td>
                                    <th>Report</th>
                                    <td>
                                        {% if diamond.pdf %}
                                            <a href="{{ diamond.pdf }}" target="_blank">View Report</a>
                                        {% else %} N/A {% endif %}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Diamond Image -->
        <div class="col-lg-4 col-md-10 text-center">
            <div class="card shadow-sm h-100">
                <div class="card-header text-center" style="font-size:1.5rem; font-weight:500; color:black;">
                    Image
                </div>
                <div class="card-body d-flex align-items-center justify-content-center">
                    {% if diamond.photo %}
                        <img src="{{ diamond.photo }}" alt="Diamond Image" class="img-fluid rounded" style="background:#eee; max-height: 400px;" />
                    {% else %}
                        <p class="text-muted">No image available</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% if request.session.user_type == 'customer' %}
<div class="text-center mt-4">
    <form action="{% url 'customer:add_to_cart' diamond.id %}" method="post">
        {% csrf_token %}
        <button type="submit" class="btn btn-primary btn-lg">Add to Cart</button>
    </form>
</div>
{% endif %}
{% endblock %}
